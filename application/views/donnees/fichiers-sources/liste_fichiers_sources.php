<?php $this->load->view('inc/header');?>    <!-- DataTables CSS -->    <link href="<?php echo URL_PLUGINS;?>datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet">    <!-- DataTables Responsive CSS -->    <link href="<?php echo URL_PLUGINS;?>datatables-responsive/css/dataTables.responsive.css" rel="stylesheet">	<!-- File upload -->    <link href="<?php echo URL_PLUGINS;?>bootstrap-fileupload/bootstrap-fileupload.css" rel="stylesheet">    <!--  Jquery UI pour popin draggable -->    <link href="<?php echo URL_PLUGINS;?>jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet">    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->    <!--[if lt IE 9]>        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>    <![endif]--></head><body>    <div id="wrapper">        <!-- Navigation -->        <?php $this->load->view('inc/nav');?>        <!-- Page Content -->        <div id="page-wrapper">            <div class="container-fluid">                <div class="row">                    <div class="col-lg-12">                        <h3 class="page-header"><i class="fa fa-database fa-fw"></i> <?php echo $this->lang->line('donnees-title');?> > <a href ="<?php echo base_url();?>donnees/liste_fichiers_sources" > <i class="fa fa-file fa-fw"></i> <?php echo $this->lang->line('fichiers-sources-title');?> </a> >  <?php echo $this->lang->line('liste-fichiers-sources-title');?>                               	<div class="pull-right">                        		<button class="btn btn-success btn-sm mod-edit" data-href="<?php echo base_url();?>donnees/editer_fichier_source" data-title="<?php echo $this->lang->line('fichier-source-title-add');?>"><i class="fa fa-plus-circle"></i> &nbsp;<?php echo $this->lang->line('fichier-source-title-add');?></button>                        	</div>                        </h3>                     </div>                    <!-- /.col-lg-12 -->                </div>                <div class="row">                <div class="col-lg-12">                	<?php if($msg!=""){               				if($msg=="delok"){?>								<div class="alert alert-success">									<?php echo $this->lang->line('alert-fichier-source-delete');?>								</div>						<?php }							if($msg=="importok"){?>						<div class="alert alert-success">							<?php echo $this->lang->line('fichier-source-importok');?>						</div>						<?php }                	}?>                    <div class="panel panel-default">                        <div class="panel-heading clearfix">                            <i class="fa fa-file fa-fw"></i> <?php echo $this->lang->line('liste-fichiers-sources-title');?>                        	<div class="pull-right text-right">								<button class="btn btn-success btn-sm mod-edit " data-href="<?php echo base_url();?>donnees/import_fichiers_source" data-title="<?php echo $this->lang->line('fichier-source-title-import')." ".$regroupement->NAME_EXTENSION;?>" ><i class="fa fa-file-excel-o"></i> &nbsp;<?php echo $this->lang->line('import');?></button>								<a class="btn btn-default btn-sm " href="<?php echo base_url();?>donnees/export_exemple_fichiers_source/" target="_blank"><i class="fa fa-file-excel-o"></i> &nbsp;<?php echo $this->lang->line('exemple');?></a>																		<a class="btn btn-info btn-sm " href="<?php echo base_url();?>donnees/export_fichiers_source/" target="_blank"><i class="fa fa-file-excel-o"></i> &nbsp;<?php echo $this->lang->line('export');?></a>																		<ul class="nav navbar-right">																				<li class="dropdown special-dropdown">										<a class="dropdown-toggle" style="margin-right:17px;padding:0;" href="javascript:;" title="<?php echo $this->lang->line('afficher-colonne');?>">											<i class="fa fa-th fa-fw"></i>  <i class="fa fa-caret-down fa-fw"></i>										</a>										<ul class="dropdown-menu" id="liste-champs-dropdown">											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" checked="checked" id="champs-0" value="0"> <?php echo $this->lang->line('fichier-source-nom');?></label>												</div>											</li>											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" checked="checked" id="champs-1" value="1"> <?php echo $this->lang->line('fichier-source-desc');?></label>												</div>											</li>											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" checked="checked" id="champs-2" value="2"> <?php echo $this->lang->line('fichier-source-domain');?></label>												</div>											</li>											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" id="champs-3" value="3"> <?php echo $this->lang->line('fichier-source-connexion');?></label>												</div>											</li>											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" id="champs-4" value="4"> <?php echo $this->lang->line('fichier-source-chemin');?></label>												</div>											</li>											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" id="champs-5" value="5"> <?php echo $this->lang->line('fichier-source-origine');?></label>												</div>											</li>											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" id="champs-6" value="6"> <?php echo $this->lang->line('fichier-source-option');?></label>												</div>											</li>											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" id="champs-7" value="7"> <?php echo $this->lang->line('fichier-source-doublon');?></label>												</div>											</li>											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" id="champs-8" value="8"> <?php echo $this->lang->line('fichier-source-historique');?></label>												</div>											</li>											<li style="">												<div class="checkbox" style="padding-left:15px;">													<label><input class="form-group check-cols" type="checkbox" name="colonnes" id="champs-9" value="9"> <?php echo $this->lang->line('fichier-source-conversion');?></label>												</div>											</li>										</ul>										<!-- /.dropdown-user -->									</li>																</ul>							</div>                        </div>                        <!-- /.panel-heading -->                        <div class="panel-body">                            <div class="dataTable_wrapper" style="padding-top:10px;">                                <table class="table table-striped table-bordered table-hover display" id="dataTables-fichiers-sources">                                    <thead>                                        <tr>                                        	<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-nom');?></th>                                        	<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-desc');?></th>                                        	<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-domain');?></th>                                        	<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-connexion');?></th>   											<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-chemin');?></th>                                        	<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-origine');?></th>                                        	<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-option');?></th>                                        	<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-doublon');?></th>                                        	<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-historique');?></th>                                           	<th style="white-space: nowrap"><?php echo $this->lang->line('fichier-source-conversion');?></th>                              	                                            <th style="white-space: nowrap"><?php echo $this->lang->line('liste-tools');?></th>                                        </tr>                                    </thead>                                    <tbody>                                    	<?php                                    	foreach ($listeFichiersSources as $fichiersource) {	                                	?>	                                		<tr class="odd gradeX">	                                			<td style="white-space: nowrap"><?php echo $fichiersource->NAME_FILE;?></td>	                                        	<td style="white-space: nowrap"><?php echo $fichiersource->DESC_FILE;?></td>	                                        	<td style="white-space: nowrap"><?php echo $fichiersource->NAME_DOMAIN;?></td>	                                        	<td style="white-space: nowrap"><?php echo $fichiersource->NAME_CONN;?></td>	                                        	<td style="white-space: nowrap"><?php echo $fichiersource->FILEPATH;?></td>  	                                        	<td style="white-space: nowrap"><?php echo $fichiersource->NAME_ORIGIN;?></td> 												<td style="white-space: nowrap" align="center" style="vertical-align:middle" ><?php if($fichiersource->FLG_OPTIONAL==1){ echo "<i class=\"fa fa fa-circle fa-fw\"></i>";}else{ echo "<i class=\"fa fa fa-circle-o fa-fw\"></i>";}?></td>	                                        	<td style="white-space: nowrap" align="center" style="vertical-align:middle" ><?php if($fichiersource->FLG_DUPLICATE==1){echo "<i class=\"fa fa fa-circle fa-fw\"></i>";}else{echo "<i class=\"fa fa fa-circle-o fa-fw\"></i>";}?></td>	                                        	<td style="white-space: nowrap" align="center" style="vertical-align:middle" ><?php if($fichiersource->FLG_HIST==1){echo "<i class=\"fa fa fa-circle fa-fw\"></i>";}else{echo "<i class=\"fa fa fa-circle-o fa-fw\"></i>";}?></td>	                                        	<td style="white-space: nowrap" align="center" style="vertical-align:middle" ><?php if($fichiersource->FLG_CVT==1){echo "<i class=\"fa fa fa-circle fa-fw\"></i>";}else{echo "<i class=\"fa fa fa-circle-o fa-fw\"></i>";}?></td>	                                            <td style="white-space: nowrap" class="center">	                                           		<a class="btn btn-info btn-xs" href="<?php echo base_url();?>donnees/fiche_fichier_source/<?php echo $fichiersource->CODE_FILE ; ?>" title="<?php echo $this->lang->line('fichier-source-title-fiche')." ".$fichiersource->NAME_FILE ; ?>"><i class="fa fa-cog fa-fw"></i> </a>	                                            	<a class="btn btn-warning btn-xs mod-edit" data-href="<?php echo base_url();?>donnees/editer_fichier_source/<?php echo $fichiersource->CODE_FILE ; ?>" data-title="<?php echo $this->lang->line('fichier-source-title-edit')." ".$fichiersource->NAME_FILE ; ?>"><i class="fa fa-pencil fa-fw"></i> </a>	                                            	<a data-toggle="modal" data-target="#myModal<?php echo $fichiersource->CODE_FILE ; ?>" class="btn btn-danger btn-xs"><i class="fa fa-trash fa-fw"></i> </a>	                                            	<!-- Modal -->						                            <div class="modal fade" id="myModal<?php echo $fichiersource->CODE_FILE ; ?>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">						                                <div class="modal-dialog">						                                    <div class="modal-content">						                                        <div class="modal-header">						                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>						                                            <h4 class="modal-title" id="myModalLabel"><?php echo $this->lang->line('fichier-source-modal-del-title');?></h4>						                                        </div>						                                        <div class="modal-body">						                                            <?php echo $this->lang->line('fichier-source-modal-del-txt');?> <strong><?php echo $fichiersource->NAME_HIST ; ?></strong> !						                                        </div>						                                        <div class="modal-footer">						                                            <button type="button" class="btn btn-default" data-dismiss="modal"><?php echo $this->lang->line('liste-close');?></button>						                                            <a type="button" class="btn btn-danger" href="<?php echo base_url();?>donnees/liste_fichiers_sources/supprimer_fichier_source/<?php echo $fichiersource->CODE_FILE ; ?>"><i class="fa fa-trash fa-fw"></i> <?php echo $this->lang->line('liste-del');?></a>						                                        </div>						                                    </div>						                                    <!-- /.modal-content -->						                                </div>						                                <!-- /.modal-dialog -->						                            </div>						                            <!-- /.modal -->													<a class="btn btn-default btn-xs mod-edit" data-href="<?php echo base_url();?>donnees/editer_fichier_source/copier_fichier_source/<?php echo $fichiersource->CODE_FILE ; ?>" data-title="<?php echo $this->lang->line('fichier-source-title-copy')." ".$fichiersource->NAME_FILE ; ?>"><i class="fa fa-files-o fa-fw"></i> </a>	                                            </td>	                                        </tr>	                                	<?php	                                	}	                                	?>                                    </tbody>                                </table>                                <div id="fenetre-edit">		                        </div>                            </div>                            <!-- /.table-responsive -->                            <div class="text-center">                        		<button class="btn btn-success btn-sm mod-edit" data-href="<?php echo base_url();?>donnees/editer_fichier_source" data-title="<?php echo $this->lang->line('fichier-source-title-add');?>"><i class="fa fa-plus-circle"></i> &nbsp;<?php echo $this->lang->line('fichier-source-title-add');?></button>                        	</div>                        </div>                        <!-- /.panel-body -->                    </div>                    <!-- /.panel -->                </div>                <!-- /.col-lg-12 -->            </div>            <!-- /.row -->            </div>            <!-- /.container-fluid -->        </div>        <!-- /#page-wrapper -->    </div>    <!-- /#wrapper -->	<?php $this->load->view('inc/footer-js');?>		<!-- Jquery UI -->    <script src="<?php echo URL_PLUGINS; ?>jquery-ui-1.11.4/jquery-ui.min.js"></script>		<!-- DataTables JavaScript -->    <script src="<?php echo URL_PLUGINS; ?>datatables/media/js/jquery.dataTables.min.js"></script>    <script src="<?php echo URL_PLUGINS; ?>datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.min.js"></script>    	<!-- File Upload -->    <script src="<?php echo URL_PLUGINS; ?>bootstrap-fileupload/bootstrap-fileupload.js"></script>        <!-- Page-Level Demo Scripts - Tables - Use for reference -->    <script>    var table ="";    $(document).ready(function() {        table = $('#dataTables-fichiers-sources').DataTable({                //"scrollX": true,				"sScrollX": "100%",                responsive: true,                "language": {									"sProcessing":     "<?php echo $this->lang->line('datatable-process');?>",									"sSearch":         "<?php echo $this->lang->line('datatable-search');?>",								    "sLengthMenu":     "<?php echo $this->lang->line('datatable-lengthMenu');?>",									"sInfo":           "<?php echo $this->lang->line('datatable-info');?>",									"sInfoEmpty":      "<?php echo $this->lang->line('datatable-infoEmpty');?>",									"sInfoFiltered":   "<?php echo $this->lang->line('datatable-filtre');?>",									"sInfoPostFix":    "",									"sLoadingRecords": "<?php echo $this->lang->line('datatable-loading');?>",								    "sZeroRecords":    "<?php echo $this->lang->line('datatable-empty');?>",									"sEmptyTable":     "<?php echo $this->lang->line('datatable-emptyTable');?>",									"oPaginate": {										"sFirst":      "<?php echo $this->lang->line('datatable-first');?>",										"sPrevious":   "<?php echo $this->lang->line('datatable-previous');?>",										"sNext":       "<?php echo $this->lang->line('datatable-next');?>",										"sLast":       "<?php echo $this->lang->line('datatable-lfas');?>"									},									"oAria": {										"sSortAscending":  "<?php echo $this->lang->line('datatable-asc');?>",										"sSortDescending": "<?php echo $this->lang->line('datatable-desc');?>"									}								},			"bStateSave": true,			"autoWidth": true        });        table.columns([3,4,5,6,7,8,9]).visible( false, false );        table.columns([0,1,2]).visible( true, true );        table.columns.adjust().draw( true );		table.columns.adjust();		table.draw( true );        $('#dataTables-fichiers-sources').on('draw.dt', function ( e, settings) {	       	 $(".mod-edit").click(function(){	             var title = $(this).attr('data-title');	 			$.post($(this).attr('data-href'),{},function(retour){	 				$('#fenetre-edit').html(retour);	 				$('#fenetre-edit .fenetre-close').click(function(){	 					fenetre.dialog("close");	 				});	 				fenetre.dialog({title:title});	 				fenetre.dialog("open");	 			})	 			return false;	         });		});        var fenetre = $('#fenetre-edit').dialog({            autoOpen: false,            resizable: true,            modal: true,            width: 500,            draggable:true          });        $(".mod-edit").click(function(){            var title = $(this).attr('data-title');			$.post($(this).attr('data-href'),{},function(retour){				$('#fenetre-edit').html(retour);				$('#fenetre-edit .fenetre-close').click(function(){					fenetre.dialog("close");				});				fenetre.dialog({title:title});				fenetre.dialog("open");			})			return false;        });        $('#btn-menu-cols').click(function(){            if($('#menu-cols').is(':visible')){            	$('#menu-cols').hide();            }else{				$('#menu-cols').show();            }        });        $(".check-cols").click(function(){			if($(this).is(':checked')){				$('#dataTables-fichiers-sources').DataTable().column($(this).val()).visible(true);			}else{				$('#dataTables-fichiers-sources').DataTable().column($(this).val()).visible(false);			}        });    });    /* Script pour empecher de fermer le dropdown menu apres un choix cliqué (Colonnes). */    $('li.dropdown.special-dropdown a').on('click', function (event) {    	$(this).parent().toggleClass("open");	});	$('body').on('click', function (e) {    	if (!$('li.dropdown.special-dropdown').is(e.target) && $('li.dropdown.special-dropdown').has(e.target).length === 0 && $('.open').has(e.target).length === 0) {        	$('li.dropdown.special-dropdown').removeClass('open');    	}	});    </script></body></html>